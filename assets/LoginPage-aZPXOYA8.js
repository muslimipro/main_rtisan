import{h as j,z as u,s as A}from"./index-q9FpLPBo.js";import{b as E,u as M,x as N,r as w,o,c as m,g as s,i as t,E as i,t as n,h as c,l as h,j as P,p as T,F as y,k as I,v as L,aE as q,w as D}from"./index-CRqy2v5g.js";import{s as H}from"./index-BSbI8VwY.js";import{s as R}from"./index-DM20WyF2.js";import{s as U}from"./index-CtvDnzVc.js";import{s as G}from"./index-B31iczSB.js";import{_ as J}from"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-BhWfjQrV.js";import{_ as K}from"./AuthHeader.vue_vue_type_script_setup_true_lang-C06qjiH9.js";import"./index-CtlvT3kO.js";import"./index-DHTXTWdU.js";import"./index-BbReKCKG.js";import"./index-PufPVhs_.js";import"./language-DYQF8nnT.js";import"./logo-D1-3uCnC.js";const O={class:"card flex flex-col items-center pt-4"},Q={class:"flex flex-1 items-center justify-center mt-4"},W={class:"text-4xl font-semibold px-2"},X={class:"flex flex-col gap-1"},Y={for:"email"},Z={class:"flex flex-col gap-1"},ee={for:"password"},se={class:"flex justify-between"},ae={class:"my-0 flex flex-col gap-1"},te={key:1},be=E({__name:"LoginPage",setup(oe){const k=M(),p=L(),f=N(),l=w(!1),$=w({email:"",password:""}),V=j(u.object({email:u.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:u.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),z=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:a}=await q.login(e.states.email.value,e.states.password.value);f.setToken(a),f.setUser(a),p.push({name:"home2"})}catch(a){k.add({severity:"error",summary:a.response.data.error,life:3e3})}finally{l.value=!1}}};return(e,a)=>{const B=G,_=U,v=R,C=H,d=D,F=A;return o(),m(y,null,[s(K),t("div",O,[s(F,{initialValues:$.value,resolver:c(V),onSubmit:z,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(r=>{var g,x;return[t("div",Q,[t("p",W,n(e.$t("logIn")),1)]),s(c(J),{class:"self-center"}),t("div",X,[s(_,{variant:"on"},{default:i(()=>[s(B,{id:"email",name:"email",type:"text",fluid:""}),t("label",Y,n(e.$t("email")),1)]),_:1}),(g=r.email)!=null&&g.invalid?(o(),h(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[P(n(r.email.error.message),1)]),_:2},1024)):T("",!0)]),t("div",Z,[s(_,{variant:"on"},{default:i(()=>[s(C,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",ee,n(e.$t("password")),1)]),_:1}),t("div",se,[(x=r.password)!=null&&x.invalid?(o(),h(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[t("ul",ae,[(o(!0),m(y,null,I(r.password.errors,(b,S)=>(o(),m("li",{key:S},n(b.message),1))),128))])]),_:2},1024)):(o(),m("div",te)),s(d,{label:e.$t("pages.login.forgotPassword"),variant:"link",size:"small",class:"p-0",onClick:a[0]||(a[0]=b=>c(p).push({name:"forgot-password"}))},null,8,["label"])])]),s(d,{type:"submit",label:e.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),s(d,{variant:"link",label:e.$t("dontHaveAnAccount"),onClick:a[1]||(a[1]=r=>c(p).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{be as default};
