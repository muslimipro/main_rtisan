import{s as te}from"./index-B45e7nRU.js";import{B as se,s as ne,o as t,c as o,m as oe,d as ae,u as le,a as ie,r as k,b as z,e as re,f as J,g as ce,h as _,i as e,j as s,t as r,k as de,F as T,l as N,n as Q,p as f,q as ue,w as me,v as pe,x as fe}from"./index-BYxlyoh-.js";import{U as Y,u as he,_ as ge}from"./MainHeader.vue_vue_type_script_setup_true_lang-FvSX6rC4.js";import{R as Z,m as ee}from"./mapRouteFromDto-BrXeuYZH.js";import{g as _e,f as V}from"./groupRoutesByType-B8LQ_TR7.js";import{L as ye}from"./lessonApi-DAcD5V07.js";import{m as xe}from"./mapLessonFromDto-DxMZVnwf.js";import"./index-lxjBgPUf.js";import"./index-0upRcmMT.js";import"./index-rJ23prLF.js";import"./logo-D1-3uCnC.js";import"./mapUnitFromDto-BRBO9875.js";import"./transformUnitDtosToPages-CGD_PO48.js";var ve=function(h){var l=h.dt;return`
.p-skeleton {
    overflow: hidden;
    background: `.concat(l("skeleton.background"),`;
    border-radius: `).concat(l("skeleton.border.radius"),`;
}

.p-skeleton::after {
    content: "";
    animation: p-skeleton-animation 1.2s infinite;
    height: 100%;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    transform: translateX(-100%);
    z-index: 1;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0), `).concat(l("skeleton.animation.background"),`, rgba(255, 255, 255, 0));
}

[dir='rtl'] .p-skeleton::after {
    animation-name: p-skeleton-animation-rtl;
}

.p-skeleton-circle {
    border-radius: 50%;
}

.p-skeleton-animation-none::after {
    animation: none;
}

@keyframes p-skeleton-animation {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(100%);
    }
}

@keyframes p-skeleton-animation-rtl {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(-100%);
    }
}
`)},ke={root:{position:"relative"}},be={root:function(h){var l=h.props;return["p-skeleton p-component",{"p-skeleton-circle":l.shape==="circle","p-skeleton-animation-none":l.animation==="none"}]}},we=se.extend({name:"skeleton",theme:ve,classes:be,inlineStyles:ke}),Le={name:"BaseSkeleton",extends:ne,props:{shape:{type:String,default:"rectangle"},size:{type:String,default:null},width:{type:String,default:"100%"},height:{type:String,default:"1rem"},borderRadius:{type:String,default:null},animation:{type:String,default:"wave"}},style:we,provide:function(){return{$pcSkeleton:this,$parentInstance:this}}},c={name:"Skeleton",extends:Le,inheritAttrs:!1,computed:{containerStyle:function(){return this.size?{width:this.size,height:this.size,borderRadius:this.borderRadius}:{width:this.width,height:this.height,borderRadius:this.borderRadius}}}};function Se(p,h,l,w,I,$){return t(),o("div",oe({class:p.cx("root"),style:[p.sx("root"),$.containerStyle],"aria-hidden":"true"},p.ptmi("root")),null,16)}c.render=Se;const Re=ae("home-store",()=>{const p=le(),{t:h}=ie(),l=k([]),w=k(!1);async function I(){try{w.value=!0;const{data:n}=await Z.getRoutes();l.value=(n==null?void 0:n.map(ee))??[]}catch(n){p.add({severity:"error",summary:n,life:2e3})}finally{w.value=!1}}const $=z(()=>_e(l.value)),M=z(()=>V(l.value,"main")),q=z(()=>V(l.value,"side")),y=z(()=>V(l.value,"one_kit")),B=z(()=>V(l.value,"hackathon"));let D={};const U=k(0),C=k(!1);async function E(){try{C.value=!0;const{data:n}=await Y.getUserProgress();U.value=n.xp,D=n.attempts.reduce((u,a)=>(u[a.date]={date:a.date,count:a.count,success:a.success},u),{})}catch(n){p.add({severity:"error",summary:n,life:2e3})}finally{C.value=!1}}const L=new Date,j=L.toISOString().slice(0,10),A=(L.getDay()+6)%7,x=new Date(L);x.setDate(L.getDate()-A-14);const F=x;function v(n,u){const a=(n-1)*7+(u-1),d=new Date(F);return d.setDate(F.getDate()+a),d.toISOString().slice(0,10)}function H(n,u){const a=v(n,u);if(a>j)return"bg-white";const d=D[a];return d?d.success?"bg-green-400":"bg-green-100":"bg-gray-200"}function O(n,u){const a=v(n,u);if(a>j)return"";const d=D[a];return d?`${a}
attempts: ${d.count}
success: ${d.success}`:`${a}: no attempts`}const i=k({lesson_id:0,lesson_level_name:"",lesson_name:"",lesson_type:"learn",route_id:0,route_name:""}),g=k(""),S=k(""),R=k(!1);async function X(){try{R.value=!0;const{data:n}=await Y.getUserLastLesson();i.value=n,g.value=h("continue")}catch(n){const{data:u}=await ye.getLessonById(5,"1",void 0),a=xe(u),{data:d}=await Z.getRouteById(1),P=ee(d);i.value.lesson_id=a.id,i.value.lesson_level_name=P.levels[0].name,i.value.lesson_name=a.name,i.value.route_id=1,i.value.route_name=P.name,g.value=h("start"),p.add({severity:"error",summary:n,life:2e3})}finally{R.value=!1,S.value="/v2/lesson/"+i.value.lesson_id+"?route_id="+i.value.route_id}}return{routes:l,isRoutesLoading:w,loadRoutes:I,groupedRoutes:$,mainRoutes:M,sideRoutes:q,oneKitRoutes:y,hackathonRoutes:B,isProgressLoading:C,loadProgress:E,getDayClass:H,getDayTooltip:O,xp:U,isLastLessonLoading:R,lastLesson:i,lastButtonLabel:g,lastButtonURL:S,loadLastLesson:X}}),$e={class:"flex flex-col items-center h-screen"},Be={class:"w-full h-full max-w-[1400px] px-4 md:px-28 py-8"},De={class:"flex flex-col gap-8 py-8"},Ce={class:"flex gap-8"},Pe={class:"flex flex-col gap-8"},ze={class:"flex flex-col w-[400px] h-[286px] bg-white border border-gray-100 rounded-3xl p-8"},Te={key:0,class:"text-4xl font-sans font-light text-gray-500 mb-4"},Ie={key:1,class:"text-4xl font-sans font-light text-gray-500 mb-4"},Ue={class:"font-normal text-5xl text-black"},je={class:"flex"},Ae={class:"flex-grow flex gap-2 justify-between items-end text-gray-500"},Fe={class:"grid grid-rows-6 grid-cols-7 gap-0.5 w-full h-full"},Xe=["title"],Ne={class:"w-[400px] h-[180px] bg-purple-50 border border-gray-100 rounded-3xl p-8"},Ve={key:0},Me={key:1,class:"flex flex-col justify-between gap-5"},qe={class:"flex items-center justify-center gap-4"},Ee={class:"flex flex-col"},He={class:"text-lg"},Oe={class:"text-gray-500"},Ke={class:"flex flex-col gap-8 w-full"},We={class:"relative flex items-center bg-slate-50 border border-gray-100 rounded-3xl p-5"},Ge={class:"flex flex-col"},Je={class:"italic text-gray-500"},Qe={key:1,class:"text-2xl"},Ye={class:"flex flex-col absolute right-5 top-3 items-end"},Ze={key:1,class:"text-gray-400"},et={key:3,class:"text-gray-500"},tt={class:"flex-grow flex flex-col justify-between items-center bg-white border border-gray-100 rounded-3xl px-8 pb-4 pt-10"},st={class:"flex flex-col items-center"},nt={key:1,class:"text-2xl font-semibold mb-2"},ot={key:3,class:"text-blue-400 font-sans"},at={key:1,class:"text-[100px]"},lt={class:"flex flex-col items-center w-full min-w-full"},it={key:1,class:"text-gray-500 font-sans mb-4"},rt={class:"flex gap-4 bg-gray-50 rounded-3xl p-8 overflow-x-scroll"},ct={key:0,class:"flex flex-row gap-4"},dt={class:"flex flex-col items-center"},ut={class:"text-lg font-semibold"},mt={class:"text-sm text-gray-500 text-center"},pt={key:0},ft={key:1},ht={key:2},Ct=re({__name:"HomePage",setup(p){const h=pe(),l=Re(),{isRoutesLoading:w,mainRoutes:I,sideRoutes:$,isProgressLoading:M,xp:q,isLastLessonLoading:y,lastLesson:B,lastButtonLabel:D,lastButtonURL:U}=J(l),{loadRoutes:C,loadProgress:E,getDayClass:L,getDayTooltip:j,loadLastLesson:K}=l,A=he(),{userInfo:x,userLabel:F,isUserInfoLoading:v}=J(A),{loadUserInfo:H}=A,O=["pi pi-microchip","pi pi-arrow-up-right","pi pi-code","pi pi-box"];return ce(()=>{H(),E(),K(),C()}),(i,g)=>{var X,n,u,a,d,P,W,G;const S=fe,R=te;return t(),o("div",$e,[_(e(ge)),s("div",Be,[s("div",De,[s("div",Ce,[s("div",Pe,[s("div",ze,[e(M)?(t(),o("div",Te,[_(e(c),{width:"11rem",height:"49px"})])):(t(),o("div",Ie,[s("span",Ue,r(e(q)),1),g[1]||(g[1]=de(" xp "))])),s("div",je,[(t(),o(T,null,N(["Mo","Tu","We","Th","Fr","Sa","Su"],(m,b)=>s("div",{key:`day-${b}`,class:"w-full h-full flex items-center justify-center rounded text-xs text-gray-500 font-medium"},r(m),1)),64))]),s("div",Ae,[s("div",Fe,[(t(),o(T,null,N(3,m=>(t(),o(T,null,[(t(),o(T,null,N(7,b=>s("div",{key:`cell-${m}-${b}`,class:Q(["aspect-square flex items-center justify-center rounded m-1",e(L)(m,b)]),title:e(j)(m,b)},null,10,Xe)),64))],64))),64))])])]),s("div",Ne,[e(v)?(t(),o("div",Ve,[e(y)?(t(),f(e(c),{key:0,height:"115px",class:"w-full mb-2"})):ue("",!0)])):(t(),o("div",Me,[s("div",qe,[g[2]||(g[2]=s("i",{class:"pi pi-crown text-orange-300",style:{"font-size":"28px"}},null,-1)),s("div",Ee,[s("div",He,r(i.$t("unlockPremium")),1),s("div",Oe,r(i.$t("getExclusiveContent")),1)])]),_(S,{label:i.$t("explorePremium"),severity:"help",class:"rounded-full"},null,8,["label"])]))])]),s("div",Ke,[s("div",We,[e(v)?(t(),f(e(c),{key:0,class:"mr-6",shape:"circle",size:"4rem"})):(X=e(x))!=null&&X.small_avatar_url?(t(),f(R,{key:1,class:"mr-6",size:"xlarge",shape:"circle",image:(n=e(x))==null?void 0:n.small_avatar_url},null,8,["image"])):(t(),f(R,{key:2,label:e(F),class:"mr-6",size:"xlarge",shape:"circle"},null,8,["label"])),s("div",Ge,[s("span",Je,r(i.$t("welcomeBack")),1),e(v)?(t(),f(e(c),{key:0,width:"15rem",height:"33px"})):(t(),o("div",Qe,r((u=e(x))==null?void 0:u.name),1))]),s("div",Ye,[e(v)?(t(),f(e(c),{key:0,width:"12rem",height:"25px",class:"mb-1"})):(t(),o("div",Ze,r((a=e(x))==null?void 0:a.school_name),1)),e(v)?(t(),f(e(c),{key:2,width:"3rem",height:"25px"})):(t(),o("div",et,r((d=e(x))==null?void 0:d.class_name),1))])]),s("div",tt,[s("div",st,[e(y)?(t(),f(e(c),{key:0,width:"15rem",height:"30px",class:"mb-2"})):(t(),o("div",nt,r((P=e(B))==null?void 0:P.lesson_name),1)),e(y)?(t(),f(e(c),{key:2,width:"10rem",height:"20px",class:"mb-2"})):(t(),o("div",ot,r((W=e(B))==null?void 0:W.lesson_level_name),1))]),e(y)?(t(),f(e(c),{key:0,width:"10rem",height:"9rem",class:"mb-2"})):(t(),o("div",at,"ðŸš€")),s("div",lt,[e(y)?(t(),f(e(c),{key:0,width:"10rem",height:"20px",class:"mb-4"})):(t(),o("div",it,r((G=e(B))==null?void 0:G.route_name),1)),_(S,{label:e(D),class:"rounded-full h-12 min-w-full",disabled:e(y),onClick:g[0]||(g[0]=m=>e(h).push(e(U)))},null,8,["label","disabled"])])])])]),s("div",rt,[e(w)?(t(),o("div",ct,[_(e(c),{height:"16rem",width:"18rem"}),_(e(c),{height:"16rem",width:"18rem"}),_(e(c),{height:"16rem",width:"18rem"}),_(e(c),{height:"16rem",width:"18rem"})])):(t(!0),o(T,{key:1},N([...e(I),...e($)],(m,b)=>(t(),o("div",{key:m.id,class:"flex-shrink-0 flex flex-col items-center justify-between h-64 w-72 bg-white rounded-xl p-4"},[s("div",dt,[s("div",ut,r(m.name),1),s("div",mt,r(m.description),1)]),s("div",{class:Q(["text-[64px] text-gray-500",O[b]])},null,2),_(S,{class:"rounded-full w-full",severity:"info",variant:"outlined",onClick:gt=>e(h).push({name:"route",params:{id:m.id}})},{default:me(()=>[m.studentProgress==0?(t(),o("span",pt,r(i.$t("start")),1)):m.studentProgress==100?(t(),o("span",ft,r(i.$t("done")),1)):(t(),o("span",ht,r(i.$t("continue")),1))]),_:2},1032,["onClick"])]))),128))])])])])}}});export{Ct as default};
