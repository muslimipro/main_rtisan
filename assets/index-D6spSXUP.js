import{_ as Me,a as Fe,b as qe,c as Ne,s as We}from"./VideoViewer.vue_vue_type_script_setup_true_lang-BXGlEfD8.js";import{s as _e}from"./index-BWs-M9Gu.js";import{s as He}from"./index-BzdoYQjx.js";import{d as Oe,u as Ke,r as p,z as xe,f as ne,b as j,e as le,o as a,c as v,p as D,i as s,q as U,A as Ae,C as ae,j as f,F as oe,l as ke,g as Ee,$ as Ye,a0 as Ze,w as T,h as m,E as we,_ as Je,x as Ce,k as me,t as se,a1 as be,Z as Qe,D as Xe,G as ee,K as et,v as tt}from"./index-BYxlyoh-.js";import{_ as st,d as nt}from"./defaultConfirmDeleteOptions-CvL9Wsl7.js";import{u as Le,c as at,a as ot,b as Be,T as lt}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-C_HPaqu4.js";import{S as it}from"./SimulationView-Ba_UIdiX.js";import{_ as rt}from"./CodeViewer.vue_vue_type_script_setup_true_lang-weLAncPl.js";import{u as Pe}from"./useLocaleStore-DBhSjf8Z.js";import{L as ut}from"./lessonApi-DAcD5V07.js";import{m as ct}from"./mapLessonFromDto-DxMZVnwf.js";import{m as dt}from"./mapUnitFromDto-BRBO9875.js";import{U as te}from"./unitApi-CQ_H-QR8.js";import{_ as vt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-a94r-NqF.js";import"./index-BCHC1xLR.js";import"./index-Zas_bQ1O.js";import"./index-DMeE97oj.js";import"./index-DfGsetke.js";import"./index-CVQoD3G2.js";import"./index-drSrk63I.js";import"./index-DeaV-vWY.js";import"./index-0upRcmMT.js";import"./language-DYQF8nnT.js";import"./index-rJ23prLF.js";import"./transformUnitDtosToPages-CGD_PO48.js";async function ye(E){const c=new TextEncoder().encode(E),g=await crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(g)).map(C=>C.toString(16).padStart(2,"0")).join("")}function pt(E){let t="",c=!1;for(let g=0;g<E.length;g++){const l=E[g];if(l==="#"&&(c=!0),c)if(l===`
`)c=!1;else continue;l!==" "&&l!=="	"&&l!==`
`&&l!=="\r"&&(t+=l)}return t}function ft(E,t){if(E.length!==t.length)return!1;const c=[...E].sort(),g=[...t].sort();return c.every((l,$)=>l===g[$])}const ce=Oe("lesson-store",()=>{const E=Ke(),t=p(null),c=p(!1),g=p(!1),l=p(!1),$=p(!1),C=p(!1),B=p(0),y=p(0),n=p([]),b=p(0),x=p(new Map),k=p(new Map),d=p([]),o=p("continue"),S=p(!1),h=p(!1),_=p(!1),G=p(!0),z=p(""),K=p(null),q=p(null),Y=p([]),Z=p([]),de=xe(),ve=Pe(),{lang:pe}=ne(ve),V=p(void 0),ie=j(()=>{var e;return _.value&&(((e=K.value)==null?void 0:e.modulesWerePut)??!0)&&G.value});async function fe(e,r){try{c.value=!0,x.value.clear(),k.value.clear(),V.value=de.userRole==="editor"?pe.value:void 0;const{data:u}=await ut.getLessonById(e,r,V.value);t.value=ct(u),t.value.stage=="published"&&M()}catch(u){E.add({severity:"error",summary:u.response.data.error,life:2e3})}finally{c.value=!1}}async function M(){if(t.value)try{C.value=!0,B.value=0,x.value.clear();const e=[];t.value.pages.forEach(w=>{w.groups.forEach(L=>{L.units.forEach(X=>{e.push({id:X.id,lessonId:t.value.id})})})});const r=e.length,u=5;for(let w=0;w<e.length;w+=u){const X=e.slice(w,w+u).map(async({id:ge,lessonId:Ve})=>{try{const{data:he}=await te.getUnitByIdandLessonId(ge,Ve,V.value);x.value.set(ge,he)}catch(he){console.warn(`Failed to preload unit ${ge}:`,he)}});await Promise.all(X),B.value=Math.round(Math.min(w+u,r)/r*100)}}catch(e){console.error("Error preloading units:",e)}finally{C.value=!1}}async function F(e,r){if(x.value.has(e))return x.value.get(e);try{g.value=!0;const{data:u}=await te.getUnitByIdandLessonId(e,r,V.value);return x.value.set(e,u),u}catch(u){E.add({severity:"error",summary:u.response.data.error,life:2e3})}finally{g.value=!1}}async function N(){if(t.value!=null){l.value=!0,n.value=[],y.value=0,b.value=0,d.value=[],z.value="",Z.value=[],h.value=!1;for(let e=0;e<t.value.pages.length;e++)d.value.push(0);o.value="continue",W(),n.value.push(t.value.pages[y.value].groups[b.value]),await J(t.value.id),l.value=!1}}function re(e,r){let u="";if(z.value==""||r.content.starting!=""){u=`emulator-${r.id}`;const w=r.content.starting;q.value=Le(u),q.value.setCode(w)}z.value=u??z.value,e=="pibody"&&(K.value=ot(z.value),Y.value=r.data.neededModules,K.value.addNeededModules(Y.value),u!=""&&(Z.value=[]))}async function J(e){_.value=!1,S.value=!1;for(let r=0;r<n.value[b.value].units.length;r++){const u=n.value[b.value].units[r];["options","open","code","pibody"].includes(u.unitType)&&(o.value="check",S.value=!0);const w=await F(u.id,e);if(w){const L=dt(w);n.value[b.value].units[r].content=L==null?void 0:L.content,n.value[b.value].units[r].data=L==null?void 0:L.data,n.value[b.value].units[r].studentState=L==null?void 0:L.studentState,["code","pibody"].includes(u.unitType)&&(_.value=!0,L.content.answer==""&&L.data.tests.lenght==0||(G.value=!1),re(u.unitType,L))}}o.value=="continue"&&await P()}async function P(){if(t.value!=null)try{$.value=!0,h.value=!1;for(const e of n.value[n.value.length-1].units){if(k.value.set(e.id,e.studentState.answer),["code","pibody"].includes(e.unitType)){const r=Le(z.value).code.value;if(e.data.tests.length>0){const u=await at(z.value,r,e.data.tests,e.data.includedCommands);h.value=u.correct}else if(!e.content.hashed_answer)h.value=!0;else{const u=pt(r),w=await ye(u);h.value=e.content.hashed_answer===w}}else if(e.unitType=="open"){const u=String(e.studentState.answer.open??"").replace(/ /g,"").toLowerCase(),w=await ye(u);h.value=e.content.hashed_answer===w}else if(e.unitType=="options"){const r=e.studentState.answer.options,u=[];for(const w of r)u.push(await ye(w));h.value=ft(e.content.hashed_answer,u)}else h.value=!0;if(h.value==!1)break}n.value[n.value.length-1].units.length||(h.value=!0),h.value?(d.value[y.value]++,b.value>=t.value.pages[y.value].groups.length-1?y.value<t.value.pages.length-1?o.value="continue":o.value="finish":o.value="continue"):o.value="try-again"}finally{$.value=!1}}async function i(){if(t.value!=null){if(b.value>=t.value.pages[y.value].groups.length-1){await Se(),$e();return}l.value=!0,b.value++,n.value.push(t.value.pages[y.value].groups[b.value]),await J(t.value.id),l.value=!1}}async function I(e){const r=n.value[n.value.length-1].id;o.value="continue",d.value[y.value]--,b.value--,n.value.pop(),r==e?y.value==0&&n.value.length==0?await N():await i():await I(e)}function W(){if(!t.value)return;let e=0;for(const r of t.value.pages)if(r.groups.every(w=>w.units.every(L=>L.studentStatus==="completed")))e!=t.value.pages.length-1&&(d.value[e]=r.groups.length,e++);else break;y.value=e}function H(){y.value!=0&&(d.value[y.value]=0,d.value[y.value-1]=0,y.value-=2,$e())}function Q(e,r){if(t.value!=null){for(const[u,w]of n.value.entries())for(const[L,X]of w.units.entries())if(X.id==e){n.value[u].units[L].studentState.answer=r;break}}}async function A(){t.value!=null&&(o.value="check")}async function ue(){t.value!=null&&(await Se(),o.value="completed")}function Ie(){x.value.clear(),B.value=0,C.value=!1}async function $e(){t.value!=null&&(l.value=!0,y.value++,n.value=[],b.value=0,o.value="continue",n.value.push(t.value.pages[y.value].groups[b.value]),await J(t.value.id),l.value=!1)}function Ue(e){_.value=e}function ze(){G.value=!0}async function De(e){if(z.value=="")return;const r=Number(z.value.split("-")[1]);e.code=q.value.code,Q(r,e),await te.saveUnitByIdandLessonId(r,t.value.id,{answer:e})}async function Se(){if(l.value=!0,t.value==null)return;const e=Array.from(k.value.entries()).map(([u,w])=>({id:u,student_answer:w})),{data:r}=await te.submitUnitsByLessonId(t.value.id,e);h.value=r.correct,k.value=new Map,l.value=!1}const R=j(()=>t.value?t.value.pages[y.value]??null:null),O=j(()=>R.value?R.value.groups[b.value]??null:null),Te=j({get:()=>{var e;return((e=O.value)==null?void 0:e.pibodyDrawerVisible)??!1},set:e=>{O.value&&(O.value.pibodyDrawerVisible=e)}}),Ge=j({get:()=>{var e;return((e=O.value)==null?void 0:e.codeDrawerVisible)??!1},set:e=>{O.value&&(O.value.codeDrawerVisible=e)}}),Re=j({get:()=>{var e;return((e=R.value)==null?void 0:e.showPibody)??!1},set:e=>{R.value&&(R.value.showPibody=e)}}),je=j({get:()=>{var e;return((e=R.value)==null?void 0:e.showCode)??!1},set:e=>{R.value&&(R.value.showCode=e)}});return{selectedLesson:t,isLessonLoading:c,isUnitLoading:g,groups:n,groupIndex:b,isGroupLoading:l,isSubmitLoading:$,isPreloadingUnits:C,preloadingProgress:B,groupStatus:o,submitExist:S,correct:h,submitEnabled:ie,pageProgress:d,emulatorID:z,neededModules:Y,slots:Z,pibodyDrawerVisible:Te,codeDrawerVisible:Ge,showPibody:Re,showCode:je,setSubmitable:Ue,loadLessonById:fe,loadUnitByIdandLessonId:F,preloadAllUnits:M,clearUnitsCache:Ie,loadInitialGroup:N,submitGroup:P,nextGroup:i,saveAnswer:Q,tryAgain:A,finishLesson:ue,runCodePressed:ze,saveStudentIdeState:De,resetGroup:I,pageBack:H}}),gt={key:1,class:"flex-grow px-4 py-2"},ht=le({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},setup(E){const t=E,c=Ae(),g=ce(),{saveAnswer:l,setSubmitable:$}=g;function C(n){t.unit.unitType=="options"?$(n.options.length>0):t.unit.unitType=="open"&&$(n.open.length>0),l(t.unit.id,n),B(n)}const B=Be(n=>{y(n)},1e3,{maxWait:5e3});async function y(n){await te.saveUnitByIdandLessonId(t.unit.id,Number(c.params.id),{answer:n})}return(n,b)=>{const x=_e;return a(),v("div",null,[n.loading?(a(),D(x,{key:0,class:"flex justify-center items-center w-10 h-full"})):(a(),v("div",gt,[t.unit.unitType=="article"?(a(),D(s(Me),{key:0,article:t.unit.content},null,8,["article"])):t.unit.unitType=="options"?(a(),D(s(Fe),{key:1,"options-data":t.unit.content,state:t.unit.studentState,onSaveAnswer:C},null,8,["options-data","state"])):t.unit.unitType=="open"?(a(),D(s(qe),{key:2,state:t.unit.studentState,onSaveAnswer:C},null,8,["state"])):t.unit.unitType=="video"?(a(),D(s(Ne),{key:3,video:t.unit.content},null,8,["video"])):U("",!0)]))])}}}),mt={key:1,class:"flex flex-col h-full w-full"},yt={class:"flex-grow flex flex-col gap-4 px-4 py-2"},wt=le({__name:"GroupCard",props:{group:{},loading:{type:Boolean}},setup(E){const t=E,c=p(null);return ae(()=>t.loading,g=>{g===!1&&c.value&&requestAnimationFrame(()=>{var l;(l=c.value)==null||l.scrollIntoView({behavior:"smooth",block:"start"})})}),(g,l)=>{const $=_e;return a(),v("div",{ref_key:"groupRef",ref:c},[g.loading?(a(),D($,{key:0,class:"flex justify-center items-center w-10 h-full"})):(a(),v("div",mt,[f("div",yt,[(a(!0),v(oe,null,ke(g.group.units,C=>(a(),D(ht,{key:C.id,unit:C},null,8,["unit"]))),128))])]))],512)}}}),bt={key:0,class:"absolute right-0"},_t=le({__name:"UnitsView",props:{pages:{}},setup(E){const t=ce(),{groups:c,isGroupLoading:g}=ne(t),{loadInitialGroup:l,resetGroup:$}=t,C=xe(),B=p(null),y=p(null),n=p(0);function b(d){let o=d;for(;o&&o.parentElement;){const S=o.parentElement,_=getComputedStyle(S).overflowY;if(_==="auto"||_==="scroll")return S;o=S}return null}async function x(){await Je();const d=b(B.value),o=y.value;if(!d||!o){n.value=0;return}const S=d.clientHeight,h=o.getBoundingClientRect().height,_=Math.max(0,S-h);n.value=_}function k(d,o){var _;const S=(_=c.value[c.value.length-1])==null?void 0:_.id;let h=null;d&&(d instanceof Element?h=d:d.$el instanceof Element&&(h=d.$el)),y.value=o.id===S?h:null}return Ee(()=>{l(),x(),window.addEventListener("resize",x)}),Ye(()=>{window.removeEventListener("resize",x)}),ae(()=>c.value.length,async()=>{await x()}),ae(()=>g.value,async(d,o)=>{o===!0&&d===!1&&await x()}),(d,o)=>{const S=Ce,h=lt;return a(),v("div",{ref_key:"rootEl",ref:B,class:"flex flex-col gap-8"},[(a(!0),v(oe,null,ke(s(c),_=>(a(),v("div",{key:_.id,ref_for:!0,ref:G=>k(G,_),class:"relative"},[!s(g)&&s(C).userRole=="editor"?(a(),v("div",bt,[Ze((a(),D(S,{type:"button",class:"w-9 h-9 mr-8 mt-2",rounded:"",severity:"secondary",variant:"text",onClick:G=>s($)(_.id)},{default:T(()=>o[0]||(o[0]=[f("span",{class:"material-icons"},"restart_alt",-1)])),_:2},1032,["onClick"])),[[h,"Reset step",void 0,{left:!0}]])])):U("",!0),m(wt,{group:_,loading:s(g)&&_.id==s(c)[s(c).length-1].id},null,8,["group","loading"])]))),128)),f("div",{style:we({height:n.value+"px"})},null,4)],512)}}}),xt={key:0,class:"flex justify-center items-center w-full min-h-24 px-8 gap-8"},kt={key:1},Ct={key:"correct",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-green-100"},$t={class:"text-lg font-bold flex items-center gap-2"},St={key:"incorrect",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-red-100"},Lt={key:"no-submit",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8"},At={key:"try-again",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-gray-50"},Et={class:"text-lg font-bold flex items-center gap-2"},Bt={key:2},Pt={key:"correct",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-green-100"},It={class:"text-lg font-bold flex items-center gap-2"},Ut={key:1,class:"flex justify-center items-center w-full min-h-24 px-8 gap-8"},zt=le({__name:"NavigationBar",setup(E){const t=ce(),{isSubmitLoading:c,groupStatus:g,isGroupLoading:l,submitExist:$,correct:C,submitEnabled:B}=ne(t),{submitGroup:y,nextGroup:n,tryAgain:b,finishLesson:x}=t;return(k,d)=>{const o=Ce;return a(),v(oe,null,[s(g)=="check"?(a(),v("div",xt,[m(o,{label:k.$t("check").toUpperCase(),icon:"pi pi-check","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:s(y),loading:s(c),disabled:s(c)||!s(B)},null,8,["label","onClick","loading","disabled"])])):U("",!0),s(g)=="continue"?(a(),v("div",kt,[m(be,{name:"pop",appear:"",mode:"out-in"},{default:T(()=>[s($)&&s(C)?(a(),v("div",Ct,[f("div",$t,[d[0]||(d[0]=f("span",{class:"text-3xl"},"🎉",-1)),me(" "+se(k.$t("correct"))+"! ",1)]),m(o,{label:k.$t("continue").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",class:"w-56 rounded-3xl",onClick:s(n),loading:s(l),disabled:s(l)},null,8,["label","onClick","loading","disabled"])])):s($)&&!s(C)?(a(),v("div",St,[m(o,{label:k.$t("continue").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:s(n),loading:s(l),disabled:s(l)},null,8,["label","onClick","loading","disabled"])])):(a(),v("div",Lt,[m(o,{label:k.$t("continue").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:s(n),loading:s(l),disabled:s(l)},null,8,["label","onClick","loading","disabled"])]))]),_:1})])):U("",!0),m(be,{name:"shake",appear:""},{default:T(()=>[s(g)=="try-again"?(a(),v("div",At,[f("div",Et,[d[1]||(d[1]=f("span",{class:"text-3xl"},"⚠️",-1)),me(" "+se(k.$t("incorrect"))+"! ",1)]),m(o,{label:k.$t("tryAgain").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:s(b)},null,8,["label","onClick"])])):U("",!0)]),_:1}),s(g)=="finish"?(a(),v("div",Bt,[s($)&&s(C)?(a(),v("div",Pt,[f("div",It,[d[2]||(d[2]=f("span",{class:"text-3xl"},"🎉",-1)),me(" "+se(k.$t("correct"))+"!",1)]),m(o,{label:k.$t("finish").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",class:"w-56 rounded-3xl",onClick:s(x),loading:s(l),disabled:s(l)},null,8,["label","onClick","loading","disabled"])])):(a(),v("div",Ut,[m(o,{label:k.$t("finish").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",class:"w-56 rounded-3xl",onClick:s(x)},null,8,["label","onClick"])]))])):U("",!0)],64)}}}),Dt=vt(zt,[["__scopeId","data-v-4f5f4e6c"]]),Tt={key:0,class:"h-screen bg-white flex flex-col items-center overflow-hidden relative"},Gt={class:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 max-w-[1920px] mx-auto"},Rt={class:"flex justify-between items-center w-full min-h-16 px-8 gap-8"},jt={class:"flex items-center gap-4"},Vt={key:0,class:"flex flex-grow max-w-screen-lg items-center gap-4"},Mt={class:"flex-1 overflow-y-auto mt-16 mb-24 w-full"},Ft={key:1,class:"flex justify-center"},qt={key:2},Nt={key:3,class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-50 border border-gray-200 flex flex-col items-center gap-4"},Wt={key:4,class:"fixed top-20 right-4 bg-white rounded-lg shadow-md z-50 border border-gray-200 p-4 min-w-64"},Ht={class:"flex items-center gap-3 mb-2"},Ot={class:"fixed bottom-0 left-0 right-0 z-50 bg-transparent shadow-md max-w-[1920px] mx-auto"},Kt={key:0,class:"absolute left-0 top-1/2 -translate-y-1/2"},Yt={class:"relative h-full"},Zt={class:"absolute -right-0 top-1/2 -translate-y-1/2 w-5 h-10 z-10"},Jt={key:1,class:"absolute right-0 top-1/2 -translate-y-1/2"},Qt={class:"relative h-full"},Xt={class:"absolute -left-0 top-1/2 -translate-y-1/2 w-5 h-10 z-10"},es={key:0,class:"h-screen flex flex-col items-center justify-center overflow-hidden gap-10"},ts={class:"flex flex-col items-center"},ss={class:"text-4xl font-bold mb-8"},ns={class:"text-md text-gray-500"},Bs=le({__name:"LessonPage",setup(E){const t=Ae(),c=tt(),g=Qe(),l=xe(),$=Pe(),{lang:C}=ne($);ae(C,async(P,i)=>{P!==i&&n.value&&await q(Number(t.params.id),(t.query.route_id??"").toString())});const B=ce(),{isLessonLoading:y,selectedLesson:n,pageProgress:b,groupStatus:x,emulatorID:k,neededModules:d,slots:o,pibodyDrawerVisible:S,codeDrawerVisible:h,showPibody:_,showCode:G,isPreloadingUnits:z,preloadingProgress:K}=ne(B),{loadLessonById:q,runCodePressed:Y,saveStudentIdeState:Z,pageBack:de}=B;function ve(){g.require({...nt,header:"Close lesson",message:"Are you sure you want to exit lesson. All progress will be lost!",acceptProps:{label:"Close",severity:"danger"},accept:()=>V()})}function pe(P){var I;const i=((I=n.value)==null?void 0:I.pages.reduce((W,H)=>W+H.groups.length,0))||1;return P/i*100}function V(){l.userRole=="editor"?t.query.route_id&&t.query.route_id!=""?c.push(`/v2/route/${t.query.route_id}/edit`):c.push("/v2/routes"):t.query.route_id&&t.query.route_id!=""?c.push("/v2/route/"+t.query.route_id):c.push("/v2/home")}ae(o,()=>{ie({slots:o.value})});const ie=Be(P=>{Z(P)},1e3,{maxWait:5e3});function fe(P){ie({slots:o.value})}const M=p(window.innerWidth),F=p(16);function N(){if(M.value=window.innerWidth,M.value<=1300){F.value=16;return}const i=452-(M.value-1024)/2;F.value=i>16?i:16}Ee(()=>{x.value="continue",N(),q(Number(t.params.id),(t.query.route_id??"").toString()),window.addEventListener("resize",N)}),Xe(()=>{window.removeEventListener("resize",N)});const re=j(()=>M.value<=1920?{}:"calc((-100vw + 1920px) / 2)"),J=()=>{c.push(`${t.path}/edit`)};return(P,i)=>{const I=Ce,W=He,H=_e,Q=We;return a(),v(oe,null,[s(x)!="completed"?(a(),v("div",Tt,[f("div",Gt,[f("div",Rt,[f("div",jt,[m(I,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:ve})]),s(n)?(a(),v("div",Vt,[(a(!0),v(oe,null,ke(s(n).pages,(A,ue)=>(a(),v("div",{key:ue,class:"h-full",style:we({width:pe(A.groups.length)+"%"})},[m(W,{value:s(b)[ue]/A.groups.length*100,"show-value":!1,class:"w-full rounded-full h-3"},null,8,["value"])],4))),128))])):U("",!0),i[9]||(i[9]=f("div",{class:"w-10"},null,-1))])]),f("div",Mt,[f("div",{class:"w-full h-full max-w-screen-lg mx-auto py-8",style:we({paddingLeft:F.value+"px",paddingRight:F.value+"px"})},[s(y)?(a(),D(H,{key:0,class:"flex justify-center"})):s(n)?(a(),v("div",qt,[m(_t,{pages:s(n).pages},null,8,["pages"])])):(a(),v("div",Ft,"No lesson found")),s(l).userRole=="editor"?(a(),v("div",Nt,[m(s(st)),m(I,{icon:"pi pi-pencil",variant:"text",severity:"contrast",onClick:J}),m(I,{variant:"text",severity:"contrast",onClick:s(de)},{default:T(()=>i[10]||(i[10]=[f("span",{class:"material-icons"},"swipe_left_alt",-1)])),_:1},8,["onClick"])])):U("",!0),s(z)?(a(),v("div",Wt,[f("div",Ht,[m(H,{style:{width:"20px",height:"20px"}}),i[11]||(i[11]=f("span",{class:"text-sm font-medium"},"Preloading units...",-1))]),m(W,{value:s(K),"show-value":!0,class:"h-2"},null,8,["value"])])):U("",!0)],4)]),f("div",Ot,[m(Dt)]),s(_)?(a(),v("div",Kt,[m(I,{icon:"pi pi-microchip",severity:"secondary",onClick:i[0]||(i[0]=A=>S.value=!0),class:"w-8 rounded-tl-none rounded-bl-none rounded-tr-lg rounded-br-lg mt-16"}),m(Q,{visible:s(S),"onUpdate:visible":i[4]||(i[4]=A=>ee(S)?S.value=A:null),modal:!1,dismissable:!1,closeOnEscape:!1,class:"h-[calc(100vh-64px)] w-fit mt-16",pt:{root:{style:`right: ${re.value}`}}},{header:T(()=>i[12]||(i[12]=[f("div",null,null,-1)])),container:T(()=>[f("div",Yt,[f("div",Zt,[m(I,{icon:"pi pi-chevron-left",severity:"secondary",onClick:i[1]||(i[1]=A=>S.value=!1),class:"w-5 rounded-tl-lg rounded-bl-lg rounded-tr-none rounded-br-none"})]),(a(),D(s(it),{id:s(k),key:s(k),slots:s(o),"onUpdate:slots":i[2]||(i[2]=A=>ee(o)?o.value=A:null),neededModules:s(d),"onUpdate:neededModules":i[3]||(i[3]=A=>ee(d)?d.value=A:null),class:"w-full",horizontal:!1,autoPut:!0},null,8,["id","slots","neededModules"]))])]),_:1},8,["visible","pt"])])):U("",!0),s(G)?(a(),v("div",Jt,[m(I,{icon:"pi pi-code",severity:"secondary",onClick:i[5]||(i[5]=A=>h.value=!0),class:"w-8 rounded-tl-lg rounded-bl-lg rounded-tr-none rounded-br-none mt-16"}),m(Q,{visible:s(h),"onUpdate:visible":i[8]||(i[8]=A=>ee(h)?h.value=A:null),header:"Drawer",modal:!1,dismissable:!1,closeOnEscape:!1,position:"right",class:"h-[calc(100vh-64px)] w-[452px] mt-16",pt:{root:{style:`left: ${re.value}`}}},{header:T(()=>i[13]||(i[13]=[f("div",null,null,-1)])),container:T(()=>[f("div",Qt,[f("div",Xt,[m(I,{icon:"pi pi-chevron-right",severity:"secondary",onClick:i[6]||(i[6]=A=>h.value=!1),class:"w-5 rounded-tl-none rounded-bl-none rounded-tr-lg rounded-br-lg"})]),(a(),D(et,null,[(a(),D(s(rt),{id:s(k),key:s(k),connectbuttons:s(_),"onUpdate:connectbuttons":i[7]||(i[7]=A=>ee(_)?_.value=A:null),onRun:s(Y),onSaveAnswer:fe},null,8,["id","connectbuttons","onRun"]))],1024))])]),_:1},8,["visible","pt"])])):U("",!0)])):U("",!0),m(be,{"enter-active-class":"transition duration-500 ease-out","enter-from-class":"opacity-0 scale-90","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-300 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-90"},{default:T(()=>[s(x)=="completed"?(a(),v("div",es,[i[14]||(i[14]=f("div",{class:"text-5xl"},"⚡️",-1)),f("div",ts,[f("div",ss,se(P.$t("goodWork")),1),f("div",ns,se(P.$t("keepLearning")),1)]),f("div",null,[m(I,{label:P.$t("continue"),class:"rounded-full w-56 text-xl",onClick:V},null,8,["label"])])])):U("",!0)]),_:1})],64)}}});export{Bs as default};
