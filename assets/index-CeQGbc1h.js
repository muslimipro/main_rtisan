import{d as $,u as N,r as y,b as A,e as D,f as F,o,c as a,g as v,i as t,_ as I,j as e,p as T,t as n,F as h,l as b,n as R,E as q,w as E,x as P,D as V}from"./index-CG54iUaD.js";import{L as z}from"./lessonApi-b6EWekY5.js";import{R as M,m as O}from"./mapRouteFromDto-0k7GSF4e.js";import{g as G}from"./groupLessonsByLevelAndType-D70aJuVS.js";import"./mapLessonFromDto-BxEkOMg4.js";import"./mapUnitFromDto-BXFFFlEW.js";const H=$("route-store",()=>{const k=N(),l=y(null),c=y({}),i=y(!1);async function m(r){var u,p;try{i.value=!0;const{data:d}=await M.getRouteById(r);l.value=O(d),c.value=G(((u=l.value)==null?void 0:u.lessons)??[],((p=l.value)==null?void 0:p.levels)??[])}catch(d){k.add({severity:"error",summary:d.response.data.error,life:2e3})}finally{i.value=!1}}return{selectedRoute:l,isRouteLoading:i,groupedLessons:c,loadRouteById:m}}),J={class:"flex flex-col items-center h-screen"},K={class:"w-full h-full max-w-screen-xl px-4 md:px-28 py-8"},Q={key:1,class:"flex justify-center"},U={key:2,class:"flex flex-col gap-8"},W={class:"flex flex-col bg-gray-50 px-8 py-4 rounded-3xl"},X={class:"text-2xl"},Y={class:"text-lg text-gray-500"},Z={class:"flex flex-wrap gap-8"},ee={class:"flex flex-row items-center justify-center gap-2 p-4 rounded-3xl h-40 w-56"},se={class:"flex flex-wrap gap-8"},ie=A({__name:"RoutePage",setup(k){const l=q(),c=E(),i=H(),{isRouteLoading:m,selectedRoute:r,groupedLessons:u}=D(i),{loadRouteById:p}=i,d=["bg-green-50","bg-blue-50"],C=["text-green-600","text-blue-600"];F(()=>p(Number(l.params.id)));function j(w,x,g){try{z.resetLessonById(x)}finally{c.push({name:w,params:{id:x},query:{route_id:g}})}}return(w,x)=>{const g=V,B=P;return o(),a("div",J,[v(t(I)),e("div",K,[t(m)?(o(),T(g,{key:0,class:"flex justify-center"})):t(r)?(o(),a("div",U,[e("div",W,[e("div",X,n(t(r).name),1),e("div",Y,n(t(r).description),1)]),(o(!0),a(h,null,b(t(r).levels,(f,L)=>(o(),a("div",{key:f.id,class:"flex flex-col items-center gap-8"},[e("div",{class:R(["py-1 px-4 text-lg font-semibold w-fit rounded-lg",`${d[L]} ${C[L]}`])},n(f.name),3),e("div",Z,[(o(!0),a(h,null,b(t(u)[f.id].learn,s=>(o(),a("div",{key:s.id},[e("div",{class:R(["flex flex-col items-center justify-center gap-2 p-4 rounded-3xl h-40 w-56",s.accessStatus=="available"?"bg-green-50":"bg-gray-50"])},[e("div",null,n(s.name),1),e("div",null,n(s.accessStatus),1),e("div",ee,[v(B,{label:"Open",onClick:()=>{var _;return t(c).push({name:"lesson",params:{id:s.id},query:{route_id:(_=t(r))==null?void 0:_.id}})}},null,8,["onClick"]),v(B,{icon:"pi pi-refresh",severity:"info",onClick:_=>{var S;return j("lesson",s.id,(S=t(r))==null?void 0:S.id)}},null,8,["onClick"])])],2)]))),128))]),e("div",se,[(o(!0),a(h,null,b(t(u)[f.id].practice,s=>(o(),a("div",{key:s.id},[e("div",{class:R(["p-4 rounded-3xl h-40 w-56",s.accessStatus=="available"?"bg-green-50":"bg-gray-50"])},[e("div",null,n(s.name),1),e("div",null,n(s.accessStatus),1)],2)]))),128))])]))),128))])):(o(),a("div",Q,"No route found"))])])}}});export{ie as default};
