import{s as I}from"./index-CzIsJ6Ud.js";import{c as A}from"./index-uphR3i3i.js";import{s as U}from"./index-BqzvxYVd.js";import{s as V}from"./index-CFIV5G-s.js";import{b as E,u as F,I as z,a7 as L,r as p,f as M,o as l,p as f,y as h,c as v,t as s,g as o,i as R,j as a,k as Y,A as q,w as D,x as K}from"./index-ZdE7U8ry.js";import{s as G}from"./index-BRrpa35N.js";import{T as g}from"./teacherApi-ChljfHMW.js";import"./index-Heetihh1.js";import"./index-8t2txb0B.js";import"./index-BBecsrrk.js";import"./index-XsBRnht_.js";import"./index-B57BgiIA.js";const H={key:1},J={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},O={class:"w-full flex justify-between items-center"},Q={class:"flex gap-4"},W={class:"flex flex-col gap-2"},X={class:"flex gap-4 items-center"},Z={class:"pl-1 text-3xl"},ee={class:"text-lg text-gray-500"},te={class:"pl-1 text-sm"},ae={class:"flex flex-col items-end"},se={class:"text-xl"},le={class:"text-3xl"},oe={key:1,class:"flex flex-col gap-2 w-full"},ne={class:"text-gray-500 text-xl"},we=E({__name:"StudentView",setup(re){const n=F(),w=z(),u=q(),_=D(),{t:r}=L(),b=["Youngling","Padawan","Knight","Master"],t=p(null),c=p(!1),i=p(!1);async function k(){if(!c.value){c.value=!0;try{const{data:e}=await g.getStudent(Number(u.params.id));t.value=e??null}catch(e){console.log(e)}finally{c.value=!1}}}async function S(){if(!i.value){i.value=!0;try{}catch(e){console.log(e)}finally{i.value=!1}}}M(()=>{k(),S()});function $(){w.require({message:r("pages.teacher.areYouSureExpelStudent"),header:r("pages.teacher.confirmation"),icon:"pi pi-exclamation-triangle",rejectProps:{label:r("pages.teacher.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:r("pages.teacher.expel"),severity:"danger"},accept:()=>{C()}})}async function C(){try{const{data:e}=await g.expelStudentFromClass(Number(u.params.id));_.go(-1),n.add({severity:"success",summary:e.message,life:2e3})}catch(e){n.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}}const d=p(!1);async function j(){try{d.value=!0;const{data:e}=await g.levelUpStudent(Number(u.params.id));window.location.reload(),n.add({severity:"success",summary:e.message,life:2e3})}catch(e){n.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}finally{d.value=!1}}return(e,x)=>{const y=G,m=K,N=V,P=U,T=A,B=I;return l(),f(B,{class:"flex-grow flex flex-col gap-2"},{default:h(()=>[c.value?(l(),f(y,{key:0,class:"flex justify-center"})):t.value?(l(),v("div",J,[o(m,{label:e.$t("pages.teacher.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:x[0]||(x[0]=ce=>R(_).go(-1))},null,8,["label"]),a("div",O,[a("div",Q,[o(N,{image:t.value.small_avatar_url.length>0?t.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),a("div",W,[a("div",X,[a("div",Z,s(t.value.name),1),a("div",ee,s(b[t.value.level]),1),o(m,{label:"Level Up",icon:"pi pi-arrow-up","icon-pos":"right",severity:"info",size:"small",loading:d.value,disabled:t.value.level>1,onClick:j},null,8,["loading","disabled"])]),a("div",te,s(e.$t("pages.teacher.since"))+" "+s(t.value.created_time.split("T")[0]),1),o(P,{class:"ml-1 w-fit"},{default:h(()=>[Y(s(t.value.access_type),1)]),_:1})])]),a("div",ae,[a("div",se,s(t.value.class_name),1),a("div",le,s(t.value.xp)+" "+s(e.$t("pages.teacher.xp")),1)])]),i.value?(l(),f(y,{key:0,class:"flex justify-center"})):(l(),v("div",oe,[a("div",ne,s(e.$t("pages.teacher.projects"))+":",1),o(T,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0})])),o(m,{label:e.$t("pages.teacher.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:$},null,8,["label"])])):(l(),v("div",H,s(e.$t("pages.teacher.noStudentFound")),1))]),_:1})}}});export{we as default};
