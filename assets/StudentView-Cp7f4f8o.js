import{s as I}from"./index-DgC3_AHi.js";import{c as U}from"./index-DunOYvNo.js";import{s as V}from"./index-FFy1LBgf.js";import{s as A}from"./index-BBtLf1dK.js";import{e as E,u as F,Z as z,a as D,r as p,g as L,o as l,p as f,D as h,c as v,t as s,h as o,i as M,j as a,k as R,y as Y,v as q,w as K}from"./index-Cl-EWMmq.js";import{s as Z}from"./index-DrNd8oWO.js";import{T as g}from"./teacherApi-86L9Dg-x.js";import"./index-BDXP-c_D.js";import"./index-DkC_aZky.js";import"./index-c1ZKh8n_.js";import"./index-Xc6B9a5M.js";import"./index-Bq-2NNa2.js";const G={key:1},H={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},J={class:"w-full flex justify-between items-center"},O={class:"flex gap-4"},Q={class:"flex flex-col gap-2"},W={class:"flex gap-4 items-center"},X={class:"pl-1 text-3xl"},ee={class:"text-lg text-gray-500"},te={class:"pl-1 text-sm"},ae={class:"flex flex-col items-end"},se={class:"text-xl"},le={class:"text-3xl"},oe={key:1,class:"flex flex-col gap-2 w-full"},ne={class:"text-gray-500 text-xl"},we=E({__name:"StudentView",setup(re){const n=F(),w=z(),u=Y(),_=q(),{t:r}=D(),b=["Youngling","Padawan","Knight","Master"],t=p(null),c=p(!1),i=p(!1);async function k(){if(!c.value){c.value=!0;try{const{data:e}=await g.getStudent(Number(u.params.id));t.value=e??null}catch(e){console.log(e)}finally{c.value=!1}}}async function S(){if(!i.value){i.value=!0;try{}catch(e){console.log(e)}finally{i.value=!1}}}L(()=>{k(),S()});function $(){w.require({message:r("pages.teacher.areYouSureExpelStudent"),header:r("pages.teacher.confirmation"),icon:"pi pi-exclamation-triangle",rejectProps:{label:r("pages.teacher.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:r("pages.teacher.expel"),severity:"danger"},accept:()=>{C()}})}async function C(){try{const{data:e}=await g.expelStudentFromClass(Number(u.params.id));_.go(-1),n.add({severity:"success",summary:e.message,life:2e3})}catch(e){n.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}}const d=p(!1);async function j(){try{d.value=!0;const{data:e}=await g.levelUpStudent(Number(u.params.id));window.location.reload(),n.add({severity:"success",summary:e.message,life:2e3})}catch(e){n.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}finally{d.value=!1}}return(e,x)=>{const y=Z,m=K,N=A,P=V,T=U,B=I;return l(),f(B,{class:"flex-grow flex flex-col gap-2"},{default:h(()=>[c.value?(l(),f(y,{key:0,class:"flex justify-center"})):t.value?(l(),v("div",H,[o(m,{label:e.$t("pages.teacher.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:x[0]||(x[0]=ce=>M(_).go(-1))},null,8,["label"]),a("div",J,[a("div",O,[o(N,{image:t.value.small_avatar_url.length>0?t.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),a("div",Q,[a("div",W,[a("div",X,s(t.value.name),1),a("div",ee,s(b[t.value.level]),1),o(m,{label:"Level Up",icon:"pi pi-arrow-up","icon-pos":"right",severity:"info",size:"small",loading:d.value,disabled:t.value.level>1,onClick:j},null,8,["loading","disabled"])]),a("div",te,s(e.$t("pages.teacher.since"))+" "+s(t.value.created_time.split("T")[0]),1),o(P,{class:"ml-1 w-fit"},{default:h(()=>[R(s(t.value.access_type),1)]),_:1})])]),a("div",ae,[a("div",se,s(t.value.class_name),1),a("div",le,s(t.value.xp)+" "+s(e.$t("pages.teacher.xp")),1)])]),i.value?(l(),f(y,{key:0,class:"flex justify-center"})):(l(),v("div",oe,[a("div",ne,s(e.$t("pages.teacher.projects"))+":",1),o(T,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0})])),o(m,{label:e.$t("pages.teacher.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:$},null,8,["label"])])):(l(),v("div",G,s(e.$t("pages.teacher.noStudentFound")),1))]),_:1})}}});export{we as default};
