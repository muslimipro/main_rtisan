import{d as $,u as N,r as y,a as q,s as A,o as F,b as o,e as r,f as v,g as s,h as e,k as I,t as n,F as h,j as b,n as R,x as T,p as D,q as P}from"./index-CqrHncwp.js";import{s as V}from"./index-Bz2avWh2.js";import{_ as z}from"./MainHeader.vue_vue_type_script_setup_true_lang-ZjrmPJIE.js";import{L as E}from"./lessonApi-sN6PhYGd.js";import"./http-Dp9UZaKl.js";import{R as M,m as O}from"./mapRouteFromDto-BC0bH49X.js";import{g as G}from"./groupLessonsByLevelAndType-D70aJuVS.js";import"./index-DWdgdhmN.js";import"./index-CucFpbsT.js";import"./index-tD8cu0zh.js";import"./mapLessonFromDto-BxEkOMg4.js";import"./mapUnitFromDto-BXFFFlEW.js";const H=$("route-store",()=>{const k=N(),l=y(null),c=y({}),i=y(!1);async function m(a){var u,p;try{i.value=!0;const{data:d}=await M.getRouteById(a);l.value=O(d),c.value=G(((u=l.value)==null?void 0:u.lessons)??[],((p=l.value)==null?void 0:p.levels)??[])}catch(d){k.add({severity:"error",summary:d.response.data.error,life:2e3})}finally{i.value=!1}}return{selectedRoute:l,isRouteLoading:i,groupedLessons:c,loadRouteById:m}}),J={class:"flex flex-col items-center h-screen"},K={class:"w-full h-full max-w-screen-xl px-4 md:px-28 py-8"},Q={key:1,class:"flex justify-center"},U={key:2,class:"flex flex-col gap-8"},W={class:"flex flex-col bg-gray-50 px-8 py-4 rounded-3xl"},X={class:"text-2xl"},Y={class:"text-lg text-gray-500"},Z={class:"flex flex-wrap gap-8"},ee={class:"flex flex-row items-center justify-center gap-2 p-4 rounded-3xl h-40 w-56"},te={class:"flex flex-wrap gap-8"},me=q({__name:"RoutePage",setup(k){const l=T(),c=D(),i=H(),{isRouteLoading:m,selectedRoute:a,groupedLessons:u}=A(i),{loadRouteById:p}=i,d=["bg-green-50","bg-blue-50"],C=["text-green-600","text-blue-600"];F(()=>p(Number(l.params.id)));function j(w,x,g){try{E.resetLessonById(x)}finally{c.push({name:w,params:{id:x},query:{route_id:g}})}}return(w,x)=>{const g=V,B=P;return o(),r("div",J,[v(s(z)),e("div",K,[s(m)?(o(),I(g,{key:0,class:"flex justify-center"})):s(a)?(o(),r("div",U,[e("div",W,[e("div",X,n(s(a).name),1),e("div",Y,n(s(a).description),1)]),(o(!0),r(h,null,b(s(a).levels,(f,L)=>(o(),r("div",{key:f.id,class:"flex flex-col items-center gap-8"},[e("div",{class:R(["py-1 px-4 text-lg font-semibold w-fit rounded-lg",`${d[L]} ${C[L]}`])},n(f.name),3),e("div",Z,[(o(!0),r(h,null,b(s(u)[f.id].learn,t=>(o(),r("div",{key:t.id},[e("div",{class:R(["flex flex-col items-center justify-center gap-2 p-4 rounded-3xl h-40 w-56",t.accessStatus=="available"?"bg-green-50":"bg-gray-50"])},[e("div",null,n(t.name),1),e("div",null,n(t.accessStatus),1),e("div",ee,[v(B,{label:"Open",onClick:()=>{var _;return s(c).push({name:"lesson",params:{id:t.id},query:{route_id:(_=s(a))==null?void 0:_.id}})}},null,8,["onClick"]),v(B,{icon:"pi pi-refresh",severity:"info",onClick:_=>{var S;return j("lesson",t.id,(S=s(a))==null?void 0:S.id)}},null,8,["onClick"])])],2)]))),128))]),e("div",te,[(o(!0),r(h,null,b(s(u)[f.id].practice,t=>(o(),r("div",{key:t.id},[e("div",{class:R(["p-4 rounded-3xl h-40 w-56",t.accessStatus=="available"?"bg-green-50":"bg-gray-50"])},[e("div",null,n(t.name),1),e("div",null,n(t.accessStatus),1)],2)]))),128))])]))),128))])):(o(),r("div",Q,"No route found"))])])}}});export{me as default};
