import{d as V,u as j,r as g,a as R,b as w,o as m,p as b,z as C,j as f,t as B,i as r,w as N,x as S,e as D,c as k,F as A,l as F,g as n,A as L,C as K,f as M,_ as P,D as U}from"./index-CG54iUaD.js";import{R as $,m as q}from"./mapRouteFromDto-0k7GSF4e.js";import{g as z,f as h}from"./groupRoutesByType-B8LQ_TR7.js";import"./mapLessonFromDto-BxEkOMg4.js";import"./mapUnitFromDto-BXFFFlEW.js";const T=V("routes-store",()=>{const d=j(),e=g([]),t=g(!1),s=g(!1);async function u(){try{t.value=!0;const{data:l}=await $.getRoutes();e.value=(l==null?void 0:l.map(q))??[]}catch(l){d.add({severity:"error",summary:l,life:2e3})}finally{t.value=!1}}async function a(l){try{s.value=!0;const{data:y}=await $.createRoute(l);await u(),d.add({severity:"success",summary:y.message,life:2e3})}catch(y){d.add({severity:"error",summary:y.response.data.error,life:2e3})}finally{s.value=!1}}const i=R(()=>z(e.value)),_=R(()=>h(e.value,"main")),v=R(()=>h(e.value,"side")),o=R(()=>h(e.value,"one_kit")),p=R(()=>h(e.value,"hackathon"));return{routes:e,isLoading:t,isCreating:s,loadRoutes:u,createRoute:a,groupedRoutes:i,mainRoutes:_,sideRoutes:v,oneKitRoutes:o,hackathonRoutes:p}}),E={class:"flex flex-col items-center"},G={class:"text-md font-medium text-gray-600"},H=w({__name:"RouteCard",props:{route:{}},setup(d){const e=N();return(t,s)=>{const u=S;return m(),b(u,{class:"p-4 border rounded-md bg-white shadow-sm w-40 h-24",variant:"outlined",severity:"secondary",onClick:s[0]||(s[0]=a=>r(e).push({name:"route-edit",params:{id:t.route.id}}))},{default:C(()=>[f("div",E,[f("div",G,B(t.route.name),1)])]),_:1})}}}),I={class:"flex flex-col gap-2"},O={class:"text-lg font-semibold"},J={class:"flex flex-wrap gap-2"},Q={class:"flex justify-end gap-2"},x=w({__name:"RouteGroup",props:{title:{},type:{},routes:{}},setup(d){const e=d,t=T(),{isCreating:s}=D(t),{createRoute:u}=t,a=g(!1),i=g("");async function _(){await u({name:i.value,description:"",route_type:e.type}),a.value=!1}return(v,o)=>{const p=S,l=L,y=K;return m(),k("div",I,[f("div",O,B(v.title),1),f("div",J,[(m(!0),k(A,null,F(v.routes,c=>(m(),b(H,{key:c.id,route:c},null,8,["route"]))),128)),n(p,{icon:"pi pi-plus",label:"Add",variant:"outlined",class:"w-40 h-24",onClick:o[0]||(o[0]=c=>{a.value=!0,i.value=""})}),n(y,{visible:a.value,"onUpdate:visible":o[3]||(o[3]=c=>a.value=c),modal:"",header:"Create new level",style:{width:"25rem"}},{default:C(()=>[n(l,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=c=>i.value=c),id:"name",class:"w-full mb-4",autocomplete:"off",placeholder:"Name"},null,8,["modelValue"]),f("div",Q,[n(p,{type:"button",label:"Cancel",severity:"secondary",onClick:o[2]||(o[2]=c=>a.value=!1)}),n(p,{type:"button",label:"Create",loading:r(s),disabled:r(s),onClick:_},null,8,["loading","disabled"])])]),_:1},8,["visible"])])])}}}),W={class:"flex flex-col items-center h-screen"},X={class:"w-full h-full max-w-screen-xl px-4 md:px-28 py-8"},Y={key:1,class:"flex flex-col gap-8 py-8"},Z={class:"flex gap-8"},ne=w({__name:"RoutesPage",setup(d){const e=T(),{isLoading:t,mainRoutes:s,sideRoutes:u,oneKitRoutes:a,hackathonRoutes:i}=D(e),{loadRoutes:_}=e;return M(_),(v,o)=>{const p=U;return m(),k("div",W,[n(r(P)),f("div",X,[r(t)?(m(),b(p,{key:0,class:"flex justify-center"})):(m(),k("div",Y,[f("div",Z,[n(x,{class:"flex-1",title:"Main",type:"main",routes:r(s)},null,8,["routes"]),n(x,{class:"flex-1",title:"Side quests",type:"side",routes:r(u)},null,8,["routes"])]),n(x,{title:"One project - one kit",type:"one_kit",routes:r(a)},null,8,["routes"]),n(x,{title:"Hackathon",type:"hackathon",routes:r(i)},null,8,["routes"])]))])])}}});export{ne as default};
