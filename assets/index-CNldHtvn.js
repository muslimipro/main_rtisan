import{s as v}from"./index-BWs-M9Gu.js";import{y as h,d as y,u as j,r as f,e as x,o as c,c as l,j as s,h as p,w,k as b,t as i,p as g,q as P,i as n,v as $,f as k,g as I,F as B,l as N}from"./index-BYxlyoh-.js";import{_ as U}from"./MainHeader.vue_vue_type_script_setup_true_lang-FvSX6rC4.js";import{m as C}from"./mapUnitFromDto-BRBO9875.js";import{t as D}from"./transformUnitDtosToPages-CGD_PO48.js";import{s as S}from"./index-BzdoYQjx.js";import{s as T}from"./index-rJ23prLF.js";import{s as A}from"./index-VM38Z9SM.js";import"./index-lxjBgPUf.js";import"./index-0upRcmMT.js";import"./logo-D1-3uCnC.js";const F={getProjects:V};async function V(){return await h.get("v2/projects")}const L=e=>{var t;return{accessStatus:e.access_status,accessType:e.access_type,createdAt:new Date(e.created_at),createdBy:e.created_by,description:e.description,id:e.id,lessonType:e.lesson_type,levelId:e.level_id,name:e.name,previewImageUrl:e.preview_image_url,reviewedBy:e.reviewed_by,sourceImageUrl:e.source_image_url,stage:e.stage,studentProgress:e.student_progress,pages:D(e.units??[]),units:((t=e.units)==null?void 0:t.map(C))??[],lastAccessedUnit:e.last_accessed_unit,updatedAt:new Date(e.updated_at),updatedBy:e.updated_by,editable:e.editable,routeId:e.route_id??0,routeName:e.route_name??"",levelName:e.level_name??""}},q=y("projects-store",()=>{const e=j(),t=f([]),a=f(!1);async function o(){try{a.value=!0;const{data:r}=await F.getProjects();t.value=(r==null?void 0:r.map(L))??[]}catch(r){e.add({severity:"error",summary:r.response.data.error,life:2e3})}finally{a.value=!1}}return{projects:t,isLoading:a,loadProjects:o}}),R={class:"flex gap-2 w-full h-full"},E={class:"flex flex-col justify-between items w-full"},M={class:"flex flex-wrap text-xs font-semibold"},z={class:"flex flex-col gap-[2px]"},G={class:"text-overline-small"},H={class:"text-body-large-semibold"},J={class:"pt-[10px]"},K=x({__name:"ProjectCard",props:{project:{}},setup(e){const t=e,a=$();return(o,r)=>{const d=A,m=T,u=S;return c(),l("div",{class:"flex flex-col rounded-lg h-[160px] w-[348px] pt-2 px-3 cursor-pointer bg-slate-50",onClick:r[0]||(r[0]=()=>n(a).push({name:"project",params:{id:o.project.id},query:{route_id:o.project.routeId}}))},[s("div",R,[s("div",E,[s("div",M,[p(d,null,{default:w(()=>[b(i(o.project.routeName),1)]),_:1})]),s("div",z,[s("div",G,i(o.project.description),1),s("div",H,i(o.project.name),1)])]),t.project.sourceImageUrl?(c(),g(m,{key:0,src:t.project.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):P("",!0)]),s("div",J,[p(u,{value:100,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-primary400)"}}})])])}}}),O={class:"flex flex-col items-center h-screen"},Q={class:"w-full h-full max-w-[1400px] px-4 md:px-28 py-8"},W={key:1,class:"flex justify-center"},X={key:2,class:"flex flex-col gap-8"},Y={class:"flex gap-[52px] p-6 bg-white rounded-2xl"},Z={class:"flex flex-col"},ee={class:"text-heading-3-semibold"},se={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},me=x({__name:"ProjectsPage",setup(e){const t=q(),{projects:a,isLoading:o}=k(t),{loadProjects:r}=t;return I(()=>r()),(d,m)=>{const u=v;return c(),l("div",O,[p(n(U)),s("div",Q,[n(o)?(c(),g(u,{key:0,class:"flex justify-center"})):n(a)?(c(),l("div",X,[s("div",Y,[s("div",Z,[s("div",ee,i(d.$t("projects")),1)])]),s("div",se,[(c(!0),l(B,null,N(n(a),_=>(c(),l("div",{key:_.id},[p(K,{project:_},null,8,["project"])]))),128))])])):(c(),l("div",W,"No projects yet"))])])}}});export{me as default};
