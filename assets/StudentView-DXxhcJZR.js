import{s as P}from"./index-CEWDzinY.js";import{c as A}from"./index-C_C48_j7.js";import{s as T}from"./index-CkG_jxBI.js";import{s as V}from"./index-DCO4yQdo.js";import{b as E,u as F,Z as I,r,f as D,o as a,l as i,D as x,c as u,t,g as l,h as R,i as o,j as q,y as z,v as M,w as Z}from"./index-B0HcSKKu.js";import{s as G}from"./index-Dd2QKpoK.js";import{u as H,S as g}from"./useSchoolStore-DXQx51Mb.js";import"./index-FY-EDxGa.js";import"./index-s085_WpE.js";import"./index-BbTwpwy1.js";import"./index-C-MCCuUZ.js";import"./index-2m9LW570.js";const J={key:1},K={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},L={class:"w-full flex justify-between items-center"},O={class:"flex gap-4"},Q={class:"flex flex-col gap-2"},U={class:"pl-1 text-3xl"},W={class:"pl-1 text-sm"},X={class:"flex flex-col items-end"},Y={class:"text-xl"},ee={class:"text-3xl"},se={key:1,class:"flex flex-col gap-2 w-full"},te={class:"text-gray-500 text-xl"},xe=E({__name:"StudentView",setup(oe){const p=F(),h=I(),d=z(),m=M(),y=H(),{loadStudents:S}=y,s=r(null),n=r(!1),c=r(!1);async function w(){if(!n.value){n.value=!0;try{const{data:e}=await g.getStudent(Number(d.params.id));s.value=e??null}catch(e){console.log(e)}finally{n.value=!1}}}async function b(){if(!c.value){c.value=!0;try{}catch(e){console.log(e)}finally{c.value=!1}}}D(()=>{w(),b()});function $(){h.require({message:"Are you sure you want to expel student from this class?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Expel",severity:"danger"},accept:()=>{k()}})}async function k(){try{const{data:e}=await g.expelStudentFromClass(Number(d.params.id));await S(),m.go(-1),p.add({severity:"success",summary:e.message,life:2e3})}catch(e){p.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}}return(e,f)=>{const _=G,v=Z,C=V,j=T,B=A,N=P;return a(),i(N,{class:"flex-grow flex flex-col gap-2"},{default:x(()=>[n.value?(a(),i(_,{key:0,class:"flex justify-center"})):s.value?(a(),u("div",K,[l(v,{label:e.$t("pages.school.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:f[0]||(f[0]=ae=>R(m).go(-1))},null,8,["label"]),o("div",L,[o("div",O,[l(C,{image:s.value.small_avatar_url.length>0?s.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),o("div",Q,[o("div",U,t(s.value.name),1),o("div",W,t(e.$t("pages.school.since"))+" "+t(s.value.created_time.split("T")[0]),1),l(j,{class:"ml-1 w-fit"},{default:x(()=>[q(t(s.value.access_type),1)]),_:1})])]),o("div",X,[o("div",Y,t(s.value.class_name),1),o("div",ee,t(s.value.xp)+" "+t(e.$t("pages.school.xp")),1)])]),c.value?(a(),i(_,{key:0,class:"flex justify-center"})):(a(),u("div",se,[o("div",te,t(e.$t("pages.school.projects"))+":",1),l(B,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0})])),l(v,{label:e.$t("pages.school.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:$},null,8,["label"])])):(a(),u("div",J,t(e.$t("pages.school.noStudentsFound")),1))]),_:1})}}});export{xe as default};
