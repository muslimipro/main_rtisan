import{s as N}from"./index-BohwC58f.js";import{c as P}from"./index-BfpVLMjD.js";import{s as T}from"./index-BB1JV1yp.js";import{s as V}from"./index-CiD9L1f2.js";import{b as E,u as F,T as I,r,f as R,o as a,l as i,y as x,c as u,t,g as l,h as q,i as o,j as z,A as D,v as M,w as G}from"./index-B0nxH1Il.js";import{s as H}from"./index-BQFPNB3u.js";import{u as J,S as g}from"./useSchoolStore-pypHCp2c.js";import"./index-DB1gY7mq.js";import"./index-CCMlaGMq.js";import"./index-CYTAOLoZ.js";import"./index-DkWavUpW.js";import"./index-HH1Pm0t2.js";const K={key:1},L={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},O={class:"w-full flex justify-between items-center"},Q={class:"flex gap-4"},U={class:"flex flex-col gap-2"},W={class:"pl-1 text-3xl"},X={class:"pl-1 text-sm"},Y={class:"flex flex-col items-end"},Z={class:"text-xl"},ee={class:"text-3xl"},se={key:1,class:"flex flex-col gap-2 w-full"},te={class:"text-gray-500 text-xl"},xe=E({__name:"StudentView",setup(oe){const p=F(),h=I(),d=D(),m=M(),y=J(),{loadStudents:S}=y,s=r(null),n=r(!1),c=r(!1);async function w(){if(!n.value){n.value=!0;try{const{data:e}=await g.getStudent(Number(d.params.id));s.value=e??null}catch(e){console.log(e)}finally{n.value=!1}}}async function b(){if(!c.value){c.value=!0;try{}catch(e){console.log(e)}finally{c.value=!1}}}R(()=>{w(),b()});function $(){h.require({message:"Are you sure you want to expel student from this class?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Expel",severity:"danger"},accept:()=>{k()}})}async function k(){try{const{data:e}=await g.expelStudentFromClass(Number(d.params.id));await S(),m.go(-1),p.add({severity:"success",summary:e.message,life:2e3})}catch(e){p.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}}return(e,f)=>{const _=H,v=G,C=V,j=T,A=P,B=N;return a(),i(B,{class:"flex-grow flex flex-col gap-2"},{default:x(()=>[n.value?(a(),i(_,{key:0,class:"flex justify-center"})):s.value?(a(),u("div",L,[l(v,{label:e.$t("pages.school.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:f[0]||(f[0]=ae=>q(m).go(-1))},null,8,["label"]),o("div",O,[o("div",Q,[l(C,{image:s.value.small_avatar_url.length>0?s.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),o("div",U,[o("div",W,t(s.value.name),1),o("div",X,t(e.$t("pages.school.since"))+" "+t(s.value.created_time.split("T")[0]),1),l(j,{class:"ml-1 w-fit"},{default:x(()=>[z(t(s.value.access_type),1)]),_:1})])]),o("div",Y,[o("div",Z,t(s.value.class_name),1),o("div",ee,t(s.value.xp)+" "+t(e.$t("pages.school.xp")),1)])]),c.value?(a(),i(_,{key:0,class:"flex justify-center"})):(a(),u("div",se,[o("div",te,t(e.$t("pages.school.projects"))+":",1),l(A,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0})])),l(v,{label:e.$t("pages.school.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:$},null,8,["label"])])):(a(),u("div",K,t(e.$t("pages.school.noStudentsFound")),1))]),_:1})}}});export{xe as default};
