import{s as V}from"./index-BbIL7Q36.js";import{d as j,u as N,r as R,b as h,e as w,o as m,p as b,D as C,j as f,t as B,i as l,v as F,w as S,f as D,c as k,F as L,l as A,h as n,H,g as K}from"./index-OExop5Hl.js";import{_ as M}from"./MainHeader.vue_vue_type_script_setup_true_lang-B8s4zzbS.js";import{R as $,m as P}from"./mapRouteFromDto-BFwq-r9Z.js";import{g as U,f as g}from"./groupRoutesByType-B8LQ_TR7.js";import{s as q}from"./index-Dzk_0KDu.js";import"./index-C4UjkNTT.js";import"./index-BrUUIw4X.js";import"./index-D8AjRIKg.js";import"./logo-D1-3uCnC.js";import"./mapLessonFromDto-BRb_Xlqa.js";import"./mapUnitFromDto-BRBO9875.js";import"./index-CQwxb1S8.js";const T=j("routes-store",()=>{const d=N(),e=R([]),t=R(!1),s=R(!1);async function i(){try{t.value=!0;const{data:r}=await $.getRoutes();e.value=(r==null?void 0:r.map(P))??[]}catch(r){d.add({severity:"error",summary:r,life:2e3})}finally{t.value=!1}}async function a(r){try{s.value=!0;const{data:y}=await $.createRoute(r);await i(),d.add({severity:"success",summary:y.message,life:2e3})}catch(y){d.add({severity:"error",summary:y.response.data.error,life:2e3})}finally{s.value=!1}}const u=h(()=>U(e.value)),_=h(()=>g(e.value,"main")),v=h(()=>g(e.value,"side")),o=h(()=>g(e.value,"one_kit")),p=h(()=>g(e.value,"hackathon"));return{routes:e,isLoading:t,isCreating:s,loadRoutes:i,createRoute:a,groupedRoutes:u,mainRoutes:_,sideRoutes:v,oneKitRoutes:o,hackathonRoutes:p}}),E={class:"flex flex-col items-center"},G={class:"text-md font-medium text-gray-600"},I=w({__name:"RouteCard",props:{route:{}},setup(d){const e=F();return(t,s)=>{const i=S;return m(),b(i,{class:"p-4 border rounded-md bg-white shadow-sm w-40 h-24",variant:"outlined",severity:"secondary",onClick:s[0]||(s[0]=a=>l(e).push({name:"route-edit",params:{id:t.route.id}}))},{default:C(()=>[f("div",E,[f("div",G,B(t.route.name),1)])]),_:1})}}}),O={class:"flex flex-col gap-2"},z={class:"text-lg font-semibold"},J={class:"flex flex-wrap gap-2"},Q={class:"flex justify-end gap-2"},x=w({__name:"RouteGroup",props:{title:{},type:{},routes:{}},setup(d){const e=d,t=T(),{isCreating:s}=D(t),{createRoute:i}=t,a=R(!1),u=R("");async function _(){await i({name:u.value,description:"",route_type:e.type}),a.value=!1}return(v,o)=>{const p=S,r=q,y=H;return m(),k("div",O,[f("div",z,B(v.title),1),f("div",J,[(m(!0),k(L,null,A(v.routes,c=>(m(),b(I,{key:c.id,route:c},null,8,["route"]))),128)),n(p,{icon:"pi pi-plus",label:"Add",variant:"outlined",class:"w-40 h-24",onClick:o[0]||(o[0]=c=>{a.value=!0,u.value=""})}),n(y,{visible:a.value,"onUpdate:visible":o[3]||(o[3]=c=>a.value=c),modal:"",header:"Create new level",style:{width:"25rem"}},{default:C(()=>[n(r,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=c=>u.value=c),id:"name",class:"w-full mb-4",autocomplete:"off",placeholder:"Name"},null,8,["modelValue"]),f("div",Q,[n(p,{type:"button",label:"Cancel",severity:"secondary",onClick:o[2]||(o[2]=c=>a.value=!1)}),n(p,{type:"button",label:"Create",loading:l(s),disabled:l(s),onClick:_},null,8,["loading","disabled"])])]),_:1},8,["visible"])])])}}}),W={class:"flex flex-col items-center h-screen"},X={class:"w-full h-full max-w-[1400px] px-4 md:px-28 py-8"},Y={key:1,class:"flex flex-col gap-8 py-8"},Z={class:"flex gap-8"},me=w({__name:"RoutesPage",setup(d){const e=T(),{isLoading:t,mainRoutes:s,sideRoutes:i,oneKitRoutes:a,hackathonRoutes:u}=D(e),{loadRoutes:_}=e;return K(_),(v,o)=>{const p=V;return m(),k("div",W,[n(l(M)),f("div",X,[l(t)?(m(),b(p,{key:0,class:"flex justify-center"})):(m(),k("div",Y,[f("div",Z,[n(x,{class:"flex-1",title:"Main",type:"main",routes:l(s)},null,8,["routes"]),n(x,{class:"flex-1",title:"Side quests",type:"side",routes:l(i)},null,8,["routes"])]),n(x,{title:"One project - one kit",type:"one_kit",routes:l(a)},null,8,["routes"]),n(x,{title:"Hackathon",type:"hackathon",routes:l(u)},null,8,["routes"])]))])])}}});export{me as default};
